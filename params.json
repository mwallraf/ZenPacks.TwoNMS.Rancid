{"name":"Zenpacks.TwoNMS.Rancid","tagline":"Zenoss ZenPack to integrate Rancid","body":"*[current version = 1.0.0]*\r\n\r\n# Overview\r\n\r\n\r\n## ZenPack Description\r\n\r\nThis community zenpack fully integrates [RANCID](http://www.shrubbery.net/rancid/) into Zenoss without any manual coniguration required.\r\n\r\nBackup all your routers, switches, load balancers, etc. right from the Zenoss interface.\r\n\r\n\r\n## How does it work\r\n\r\nThe new \"zenrancid\" daemon takes care of running RANCID once a day in the background, by default at 02:00 am.\r\n\r\nThe Rancid modeler checks the SVN database for config changes and displays each config version as a device component.\r\n\r\n> **The zenoss device ID is used in the Rancid config files. so make sure that it can resolve to a valid IP address.**\r\n> **Possibly you need to add the hosts to the local /etc/hosts file. Examples can be found in the Zenoss community to automate this.**\r\n\r\n## Screenshots\r\n\r\nCheck the [screenshots here](https://github.com/mwallraf/ZenPacks.TwoNMS.Rancid/tree/master/screenshots).\r\n\r\n\r\n# Installation\r\n\r\n> **Check the pre-requisites before starting the installation**\r\n> **Install the ZenPack from command line to make sure everything went ok**\r\n\r\nDuring the installation the RANCID binaries are being compiled from source (make & gcc) so the ZenPack only works on Unix. \r\nCurrently the ZenPack has only been tested on CentOS but it should work on all unix flavors capable of compiling Rancid.\r\n\r\n\r\n## Pre-Requisites\r\n\r\nMake sure your system meets these requirements, you might also check the requirements for Rancid on their [website](http://www.shrubbery.net/rancid/):\r\n\r\n* Unix only\r\n* expect\r\n* tar\r\n* gzip\r\n* make\r\n* gcc\r\n* subversion (CVS is currently not supported)\r\n* telnet (for Rancid)\r\n* sendmail (for Rancid)\r\n\r\n\r\n## Installing the ZenPack\r\n\r\nIt is recommended to install this package from commandline so that you can see if there were any pre-requisites missing and if the compilation of RANCID was succesful.\r\n\r\n      zenpack --link --install=/<path to files>/ZenPacks.TwoNMS.Rancid\r\n      zenoss restart\r\n\r\nIf there were no errors and the folder $ZENHOME/rancid exists then the installation went ok.\r\n\r\nMake sure that the new daemon \"zenrancid\" is started: \r\n\r\n      zenrancid status\r\n\r\n**NOTE:** *re-installing the zenpack will remove all files in the $ZENHOME/rancid folder !*\r\n\r\n\r\n## Upgradig the ZenPack\r\n\r\nUpgrading the ZenPack is currently not specifically supported. If upgrading will not work then the old version has to be removed before installing the new version.\r\nIt is possible that upgrading will remove all old config files.\r\n\r\n## Uninstalling the ZenPack\r\n\r\nUninstalling the ZenPack can be done using the Zenoss web interface or via commandline:\r\n\r\n      zenpack --remove=ZenPacks.TwoNMS.Rancid\r\n\r\n> **NOTE:** *re-installing the zenpack will remove all files in the $ZENHOME/rancid folder !*\r\n\r\n\r\n# Adding Devices to Rancid\r\n\r\nDevices can be added to RANCID using the zenoss interface by changing the zRancid properties. \r\nThere is no need to manually populate the RANCID \"router.db\" files.\r\n\r\n# Add the zenrancid modeler to the devices\r\n\r\nDon't forget to add the zenrancid modeler to the devices that you want to include in Rancid! The modeler takes care of integrating the configs in the Zenoss GUI. Withouth the modeler Rancid will take the backups but you will not see the results inside Zenoss.\r\nThe modeler to add is community.twonms.python.RancidMap\r\n\r\n\r\n## First Use\r\n\r\nBy default no devices will be added to the RANCID monitoring. \r\n\r\nIn order to add a device you have to make sure the zRancid properties are set correctly.\r\nDisabling the zRancidIgnore property will include the device to the RANCID router.db file and the next time RANCID runs the device will be included.\r\n\r\nAfter a device has been enabled for Rancid via the zRancid properties the zenrancid daemon has to run.\r\nYou can run this manually or if the daemon is started you can wait until it's started automatically, by default once a day.\r\nThe modeler takes care of displaying the configs into zenoss, each config version is a device component called *Rancid Revision*.\r\n\r\n> *It may take 2 runs of zenrancid before the configuration of the device will show up as a component.* \r\n> *The first run just checks in the device into the Subversion repository and as of the second run any configuration changes will be stored.*\r\n> *The zenrancid daemon only runs once a day by default so if zenmodeler was started before zenrancid then any changes will be visible in Zenoss only after the next time zenmodeler is started.*\r\n\r\n\r\n## zenrancid daemon\r\n\r\nThe is the daemon that takes care of running RANCID so it calls \"rancid-run\" in the background.\r\nIt is possible to disable the daemon but then you have to schedule rancid-run manually as a cron job.\r\n\r\nThe daemon can be configured using the zenrancid.conf config file.\r\nBy default zenrancid will start at 02:00am every day but this can be changed in the zenrancid.conf file.\r\n\r\nIt is possible to run zenrancid via command-line for all devices or for a single device:\r\n\r\n      zenrancid run --device=MYDEVICE\r\n      \r\n(MYDEVICE should exist in Zenoss)\r\n\r\n\r\n## Rancid modeler\r\n\r\nThe modeler will check if new config versions or SVN revisions are available. \r\nEach revision will be visible as a device os component called \"Rancid Revision\"\r\n\r\nTo run the modeler for a single device, this could be useful after running zenrancid for a single device:\r\n\r\n      zenmodeler run --device=MYDEVICE\r\n\r\n(MYDEVICE should exist in Zenoss)\r\n\r\n\r\n## Rancid zProperties\r\n\r\nA few new zProperties are created when the ZenPack is installed.\r\nzRancid properties are used to indicate if a device will be added to Rancid, what Rancid device type it should be, what group is created and the username + password.\r\n\r\n* zRancidIgnore = Indicates if the device should be included in Rancid or not\r\n* zRancidGroup = The Rancid group that the device belongs to, each group means a different directory in Rancid\r\n* zRancidDeviceType = The Rancid device type (ex. cisco, f5, netscreen)\r\n* zRancidUser = The default username used to login to a device\r\n* zRancidPassword = The default password for the username\r\n* zRancidEnablePassword = The enable password if needed\r\n* zRancidViewerPath = if you have ane external SVN viewer installed (ex. ViewVC) then you can put a link to the URL here, this link will be used in the Rancid Revision device components. This path accepts the parameters: %device% %group% %id% %type%\r\n* zRancidSSH = Indicates that SSH should be used as login method, otherwise telnet will be used\r\n\r\n\r\n# Configuration files\r\n\r\nThis ZenPack runs \"out of the box\" so no configuration changes have to be made.\r\nHowever it is possible to change to the default Rancid configuration files which are stored in $ZENHOME/rancid/etc\r\n\r\n\r\n## zenrancid daemon config\r\n\r\nThis is the default zenrancid daemon config file and is available in $ZENHOME/etc/zenrancid.conf\r\nUsually you won't have to make any changes here except if you want to update the time and frequency when zenrancid should start.\r\n\r\n* starttime 02:00 = the time when the zenrancid daemon should start the first time, by default 02:00am\r\n* cycletime 86400 = the frequency when the zenrancid daemon starts, by default every 24 hours\r\n\r\n\r\n## rancid.conf\r\n\r\nThis is the default configuration file used by Rancid and can be found in $ZENHOME/rancid/etc.\r\nThis file is auto-generated and over-written each time zenrancid runs.\r\nYou can override the generated file by creating a new file called $ZENHOME/rancid/etc/rancid-custom.conf\r\nAll settings in this custom file will override the standard settings.\r\n\r\n\r\n## .cloginrc\r\n\r\nThis is the default device authentication file used by Rancid and can be found in the zenoss user home folder.\r\nThis file is auto-generated and over-written each time zenrancid runs.\r\nYou can override the generated file by creating a new file called $ZENHOME/rancid/etc/cloginrc-custom\r\nAll settings in this custom file will override the standard settings.\r\n\r\n\r\n## router.db\r\n\r\nThe router.db files contain a list of all the devices that should be included in Rancid. Each device group has its own router.db file.\r\nThese files are generated automatically from Zenoss by disabling the \"zRancidIgnore\" property and configuring the \"zRancidGroup\" property. This is done each time the zenrancid daemon runs.\r\n\r\nIf you want to include devices to Rancid which are not managed in Zenoss then you need to create your own router.db files using the same folder structure as Rancid uses.\r\nThis has to be done in the folder $ZENHOME/rancid/etc/customdb/\r\n\r\nFor example if you have a folder structure $ZENHOME/rancid/var/Switches/router.db then you'll need to create the following file : $ZENHOME/rancid/etc/customdb/Switches/router.db\r\n\r\n\r\n# Caveats\r\n\r\n   - Special characters in passwords may need to be escaped (ex. *, ^, ..)\r\n   - the first time it may take two runs of \"zenrancid\" before you will start seeing configs, the first time only the SVN folder structure is built\r\n   - you have to wait for the next run of \"zenmodeler\" before config revisions will be visible as component\r\n   - In case the installation fails because of missing requirements for example it may be impossible to re-install or remove the Zenpack because of an issue with the zProperties. The workaround is to comment all zProperties in the **__init__.py** file, remove the zenpack, uncomment the zProperties and try again.\r\n   - at this moment customized router.db files can only be used for groups which already exist in Zenoss, so at least 1 device in zenoss must be enabled in the rancid group. Should be fixed\r\n\r\n\r\n# TODO\r\n\r\nSo many things to add, so little time :)\r\n\r\nCheck the [readme.txt](https://github.com/mwallraf/ZenPacks.TwoNMS.Rancid/blob/master/README.txt) file for the TODO list for the next release.\r\n\r\n\r\n# Contact & Links\r\n\r\n* Report issues [here](https://github.com/mwallraf/ZenPacks.TwoNMS.Rancid/issues)\r\n* Link to [Zenoss](http://www.zenoss.org/)\r\n* Link to [Zenoss ZenPacks](http://wiki.zenoss.org/Category:ZenPacks)\r\n* Link to [Rancid](http://www.shrubbery.net/rancid/)\r\n* Link to [ViewVC](http://www.viewvc.org/)\r\n\r\nFor Professional services contact us at [TwoNMS.com](http://2nms.github.io)\r\n","google":"UA-42456553-1","note":"Don't delete this file! It's used internally to help with page regeneration."}